(this["webpackJsonpreference-field-popup"]=this["webpackJsonpreference-field-popup"]||[]).push([[0],{21:function(e,t,s){},38:function(e,t,s){"use strict";s.r(t);var c=s(1),n=s.n(c),i=s(23),a=s.n(i),l=s(25),r=s(2),d=s(9),o=s(10),j=s(8),h=s(12),u=s(11),b=s(13),f=s(7),O=s(20),m=s(0),p=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){return Object(d.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"loader",children:[Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{})})]})}}]),s}(n.a.Component),v=s(24),x=s.n(v),g=(s(21),function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){return Object(d.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var e=this.props,t=e.entries,s=e.isSelected,c=e.selectedRefEntries,n=e.handleSelect,i=e.loadContent,a=e.searchMsg,l=e.totalEntries,r=e.skip,d=e.selectedRef,o=e.isLoading,j=s?c:t;return Object(m.jsxs)("ul",{className:"list-layout",children:[Object(m.jsxs)("li",{className:"table-head",children:[Object(m.jsx)("div",{className:"table-cell w-5"}),Object(m.jsx)("div",{className:"table-cell w-32",children:"Name"}),Object(m.jsx)("div",{className:"table-cell w-32",children:"MODIFIED AT"}),Object(m.jsx)("div",{className:"table-cell w-30",children:"PUBLISH DETAILS"})]}),Object(m.jsx)("div",{className:"table-body",children:j.length>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("ul",{children:null===j||void 0===j?void 0:j.map((function(e){var t=c.some((function(t){return t.uid===e.uid}));return Object(m.jsxs)("li",{title:e.title,id:e.uid,className:t?"active":"",onClick:function(s){var c=s.currentTarget;t||e.uid!==c.id?c.classList.remove("active"):c.classList.add("active"),n(e);var i=c.childNodes[0].childNodes[0].childNodes[0];i.checked=!i.checked},children:[Object(m.jsx)("div",{className:"cs-checkbox w-5",children:Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"checkbox",className:"cs",defaultChecked:t,onChange:function(s){var c=s.target.parentNode.parentNode.parentNode;t||e.uid!==c.id?c.classList.remove("active"):c.classList.add("active"),n(e)}}),Object(m.jsx)("span",{className:"lbl"})]})}),s?Object(m.jsxs)("div",{className:"table-cell w-35",children:[e.title,Object(m.jsxs)("div",{className:"content-type",children:["Content type: ",Object(m.jsx)("span",{children:e._content_type_uid})]})]}):Object(m.jsx)("div",{className:"table-cell w-35",children:e.title}),Object(m.jsx)("div",{className:"table-cell w-35",children:x()(e.updated_at).format("ddd, MMM D YYYY")}),Object(m.jsx)("div",{className:"table-cell w-32",children:e.publish_details.length>0?e.publish_details.map((function(e,t){return Object(m.jsxs)("li",{className:"env",children:[e,Object(m.jsx)("div",{children:Object(m.jsx)("i",{className:"icon-exclamation-sign status-publish"})})]},t)})):Object(m.jsx)("li",{className:"env",children:"Not Published"})})]},e.uid)}))}),Object(m.jsx)("div",{className:"load-more",id:"loadMore",onClick:i,style:{display:s||r[d]>l?"none":"block"},children:Object(m.jsx)("a",{children:"Load More"})})]}):a&&!o?Object(m.jsx)("div",{className:"no-item-found",children:"No entries found"}):Object(m.jsx)(p,{})})]})}}]),s}(n.a.PureComponent)),N=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(d.a)(this,s),(e=t.call(this)).selectingRefEntries=function(t){var s=e.state.selectedRefEntries;if(s.some((function(e){return e.uid===t.uid})))s.splice(s.findIndex((function(e){return e.uid===t.uid})),1),e.setState({selectedRefEntries:Object(O.a)(s)});else{var c=Object(O.a)(s);c.push(t),e.setState({selectedRefEntries:c})}},e.loadMore=function(){var t=e.state,s=t.skip,c=t.count,n=t.selectedRef;s[n]<=c&&(window.opener.postMessage({message:"loadmore",skip:s,selectedRef:n},"*"),e.setState((function(e){return{skip:Object(f.a)(Object(f.a)({},e.skip),{},Object(b.a)({},n,s[n]+10))}})))},e.sendAndClose=function(t){var s=e.state.selectedRefEntries;t?e.props.closeWindow(s):e.props.closeWindow([])},e.showAllEntries=function(){e.setState((function(e){return{isSelected:!e.isSelected}}))},e.showselectedEntries=function(){e.setState((function(e){return{isSelected:!e.isSelected}}))},e.searchQueryHandler=function(t){var s=e.state.selectedRef,c=t.target.value.toLowerCase();e.setState({searchQuery:c}),13===t.charCode&&(""!==c?window.opener.postMessage({message:"search",query:c,selectedRef:s},"*"):e.setState((function(e){return{entries:e.initialEntries,count:e.initialCount,skip:Object(f.a)(Object(f.a)({},e.skip),{},Object(b.a)({},s,10))}})))},e.fetchQuery=function(){var t=e.state.selectedRef,s=document.getElementById("search").value;""!==s?window.opener.postMessage({message:"search",query:s,selectedRef:t},"*"):e.setState((function(s){return{entries:e.state.initialEntries,count:e.state.initialCount,skip:Object(f.a)(Object(f.a)({},s.skip),{},Object(b.a)({},t,10))}}))},e.selectRef=function(t){var s=e.state.skip;e.props.referenceTo.forEach((function(e){s[e]=0})),e.setState((function(e){return{entries:[],initialEntries:[],count:0,isLoading:!0,searchMsg:!0,selectedRef:t,skip:Object(f.a)(Object(f.a)({},e.skip),{},Object(b.a)({},t,s[t]+10))}})),window.opener.postMessage({message:"add",skip:s,selectedRef:t},"*")},e.extension={},e.state={isSelected:!1,searchQuery:"",entries:[],initialEntries:[],count:0,skip:{},selectedRefEntries:[],isLoading:!0,searchMsg:!1,selectedRef:void 0},e.loadMore=e.loadMore.bind(Object(j.a)(e)),e.selectingRefEntries=e.selectingRefEntries.bind(Object(j.a)(e)),e.fetchQuery=e.fetchQuery.bind(Object(j.a)(e)),e.searchQueryHandler=e.searchQueryHandler.bind(Object(j.a)(e)),e}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.referenceTo,t=this.state.skip;e.forEach((function(e){t[e]=0})),this.setState({referenceTo:e,selectedRef:e[0]}),window.opener.postMessage({message:"add",skip:t,selectedRef:e[0]},"*"),this.setState((function(s){return{skip:Object(f.a)(Object(f.a)({},s.skip),{},Object(b.a)({},e[0],t[e[0]]+10))}}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,s=this.props.selectedRefEntries;e.selectedRefEntries!==s&&this.setState({selectedRefEntries:e.selectedRefEntries}),e.entries.count>0?this.setState({entries:e.entries.entries,count:e.entries.count,initialEntries:e.entries.entries,initialCount:e.entries.count,searchMsg:!1,isLoading:!1}):(setTimeout((function(){t.setState({searchMsg:!0})}),1e3),this.setState({isLoading:!1})),"searchResult"===e.message&&e.searchResult.count>=0&&(this.setState({entries:e.searchResult.entries,count:e.searchResult.count}),0===e.searchResult.count&&this.setState({searchMsg:!0,isLoading:!1})),"loadmoreResult"===e.message&&e.loadmoreResult.count>0&&(this.setState({entries:this.state.entries.concat(e.loadmoreResult.entries)}),this.state.skip[this.state.selectedRef]>this.state.count&&(document.getElementById("loadMore").style.display="none"))}},{key:"render",value:function(){var e=this,t=this.state,s=t.referenceTo,c=t.entries,n=t.count,i=t.selectedRefEntries,a=t.searchMsg,l=t.skip,r=t.selectedRef,d=t.isLoading;return Object(m.jsx)("div",{className:"modal display-block",children:Object(m.jsxs)("section",{className:"modal-main",children:[this.props.children,Object(m.jsx)("div",{className:"modal-header",children:Object(m.jsx)("h2",{children:"Choose Entries"})}),Object(m.jsxs)("div",{className:"search-bar",children:[this.state.isSelected?Object(m.jsx)("div",{className:"show-selected-entries",children:Object(m.jsxs)("span",{children:[i.length," entries selected"]})}):Object(m.jsxs)("div",{className:"form-grp",children:[Object(m.jsxs)("div",{className:"cs-pagination clearfix",children:[Object(m.jsxs)("div",{className:"selected-filter","data-toggle":"dropdown",children:[Object(m.jsx)("span",{children:Object(m.jsx)("span",{className:"active-filter",title:"Active",children:r||""})}),Object(m.jsx)("i",{className:"icon-chevron-down"})]}),Object(m.jsx)("div",{className:"dropdown-menu select-controls",children:Object(m.jsx)("ul",{className:"scroll-bar-design no-padding",id:"filterList",children:null===s||void 0===s?void 0:s.map((function(t,s){return Object(m.jsx)("li",{onClick:function(){return e.selectRef(t)},id:"all",className:"filter selected-option",value:"active",children:Object(m.jsx)("label",{className:"lbl dropdown-text-wrap",children:t})},s)}))})})]}),Object(m.jsxs)("div",{className:"cs-form-group search-box no-margin",children:[Object(m.jsx)("span",{className:"search-input",children:Object(m.jsx)("input",{type:"search",id:"search",className:"cs-text-box cs-global-search",placeholder:"Search Entry",onKeyPress:this.searchQueryHandler})}),Object(m.jsx)("span",{className:"search-icon",onClick:this.fetchQuery,children:Object(m.jsx)("i",{className:"icon-search"})})]})]}),Object(m.jsx)("div",{className:"ref-section",children:this.state.isSelected?Object(m.jsxs)("span",{className:"select-count",onClick:this.showAllEntries,children:[Object(m.jsx)("i",{className:"icon icon-angle-left"}),"Back to entries list"]}):Object(m.jsxs)("span",{className:"select-count",onClick:this.showselectedEntries,children:["Show selected entries(",i.length,")"]})})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsx)(g,{entries:c&&c,isSelected:this.state.isSelected,loadContent:this.loadMore,handleSelect:this.selectingRefEntries,selectedRefEntries:i,searchMsg:a,isLoading:d,totalEntries:n&&n,skip:l&&l,selectedRef:r&&r}),Object(m.jsx)("div",{className:"ref-section",children:this.state.isSelected?"":Object(m.jsxs)("span",{className:"ref-count",children:["showing ",c.length," of"," ",n," entries"]})})]}),Object(m.jsx)("div",{className:"modal-footer",children:Object(m.jsxs)("div",{className:"right",children:[Object(m.jsx)("button",{className:"cancel-btn btn",onClick:function(){return e.sendAndClose(!1)},children:"Cancel"}),Object(m.jsxs)("button",{className:"add-btn btn",onClick:function(){return e.sendAndClose(!0)},children:[Object(m.jsx)("i",{className:"icon-ok"}),"Add Selected Entries (",i.length,")"]})]})})]})})}}]),s}(n.a.PureComponent),R=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var c;return Object(d.a)(this,s),(c=t.call(this,e)).onCloseWindow=function(e){e.length>0?window.opener.postMessage({message:"sending selected entries",selectedRefEntries:e},"*"):window.opener.postMessage({message:"Window closed sending selected entries"},"*"),window.close()},c.state={message:"",config:void 0,referenceTo:void 0,entries:[],searchResult:[],loadmoreResult:[],selectedRefEntries:[]},c.onCloseWindow=c.onCloseWindow.bind(Object(j.a)(c)),c}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;window.opener||window.close(),window.opener.postMessage({message:"get config and selected entries",getConfig:!0},"*");window.addEventListener("message",(function(t){var s=t.data;s.config&&e.setState({message:s.message,config:s.config,referenceTo:s.referenceTo}),s.selectedRefEntries&&e.setState({message:s.message,selectedRefEntries:s.selectedRefEntries}),s.entries&&e.setState({message:s.message,entries:s.entries}),s.loadmoreResult&&e.setState({message:s.message,loadmoreResult:s.loadmoreResult}),s.searchResult&&e.setState({message:s.message,searchResult:s.searchResult})}),!1)}},{key:"render",value:function(){var e=this.state,t=e.config,s=e.referenceTo,c=e.entries,n=e.searchResult,i=e.loadmoreResult,a=e.message,l=e.selectedRefEntries;return Object(m.jsx)("div",{children:t&&Object(m.jsx)(N,{config:t,referenceTo:s,entries:c,message:a,searchResult:n,loadmoreResult:i,closeWindow:this.onCloseWindow,selectedRefEntries:l})})}}]),s}(n.a.Component);var w=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(l.a,{children:Object(m.jsx)(r.c,{children:Object(m.jsx)(r.a,{exact:!0,path:"/",component:R})})})})},k=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,39)).then((function(t){var s=t.getCLS,c=t.getFID,n=t.getFCP,i=t.getLCP,a=t.getTTFB;s(e),c(e),n(e),i(e),a(e)}))};a.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(w,{})}),document.getElementById("root")),k()}},[[38,1,2]]]);
//# sourceMappingURL=main.4523a597.chunk.js.map